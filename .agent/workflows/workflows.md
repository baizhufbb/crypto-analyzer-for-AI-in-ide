---
description: 加密货币市场分析与交易建议标准工作流
---

# 加密货币分析标准工作流

本工作流旨在规范 AI 交易员在处理用户行情分析请求时的操作步骤，确保数据准确、分析全面且策略一致。

## 1. 初始化与环境同步
在进行任何分析之前，必须先确立时间基准和用户策略偏好。

1. **获取当前时间**
   运行以下命令以获取对话的“现在”时间点：
   ```bash
   uv run scripts/get_conversation_time.py
   ```
   *注意：后续所有分析中的“当前价格”、“今日涨跌”均需以此时间为准。*

2. **读取交易策略**
   读取用户当前的策略配置文件：
   - 文件路径: `docs/user_strategy` (或 `docs/user_strategy.md`)
   - 目的: 确认当前的风险偏好（如“高胜率至上”）、报告格式要求及量化指标需求。

## 2. 意图识别与数据获取
根据用户指令类型选择合适的数据获取方式。

### 分支 A：特定交易对分析 (e.g. "分析 BTC", "看看 ETH")
1. **识别交易对与交易所**
   - 默认优先 OKX (`BTC-USDT-SWAP`), 其次 Binance (`BTCUSDT`)。
2. **获取详细数据**
   运行 `crypto_fetcher.py`。例如：
   ```bash
   uv run scripts/crypto_fetcher.py --exchange okx --symbols BTC-USDT-SWAP --interval [周期] --limit [数量]
   ```
   *说明：根据当前分析的时间跨度（如短线/中长线）自主决定 `interval` (如 1m, 5m, 15m, 1h, 1d等) 和 `limit` 参数。*

### 分支 B：市场扫描与机会发现 (e.g. "看大盘", "找机会")
1. **获取市场快照**
   运行 `market_snapshot.py` 获取头部资产概况：
   ```bash
   uv run scripts/market_snapshot.py --exchange okx --top [数量] --include-raw
   ```
   *说明：根据市场广度需求自主设定 `top` 数量（如 30, 50, 100），并根据涨跌幅、成交量等数据自主筛选潜力标的。*
3. **获取详细数据 (对筛选出的标的)**
   对筛选出的标的运行 `crypto_fetcher.py`。

## 3. 信息增强 (联网搜索)
**必须**进行联网搜索以规避基本面风险。

1. **宏观与基本面检查**
   - 根据当前市场热点，自主搜索相关的宏观经济新闻、政策动态或行业大事。
2. **项目/币种特定排查**
   - 针对分析标的，灵活搜索其近期的项目进展、社区动态或潜在利好/利空消息。
3. **风险规避**
   - 重点排查是否存在可能导致行情剧烈反转的黑天鹅事件（如安全事故、监管打击等）。

## 4. 综合分析与报告生成
结合技术数据、基本面信息和用户策略生成最终报告。

1. **技术面分析**
   - 自主选择最适合当前行情的各类技术指标进行综合研判，不局限于特定指标。
   - 重点识别趋势方向、动能强弱及关键支撑/阻力位。
2. **基本面验证**
   - 宏观环境是否支持？
   - 是否有重大利好/利空？
3. **策略匹配与量化输出**
   - 严格遵循 `docs/user_strategy` 的格式要求。
   - **必须包含**：
     - 标的与方向
     - 核心理由
     - 量化评估 (胜率、持仓时长、走势概率、时间概率、盈亏比)
     - 执行计划 (入场、止损、止盈)

## 5. 结束
- 询问用户是否需要针对特定标的进行更深度的分析或调整策略。
